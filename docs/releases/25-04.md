
# 25.04 (preview)

This page summarizes the upcoming changes in Nextflow 25.04, which will be released in May 2025.

:::{note}
This page is a work in progress. It will continue to be updated as features are finalized, and should not be considered complete until the 25.04 release.
:::

## New features

### Strict syntax

The *strict syntax* is a strict parser for Nextflow DSL2 that implements the {ref}`Nextflow language specification <syntax-page>`. Originally introduced by the [Nextflow language server](https://github.com/nextflow-io/language-server) alongside Nextflow 24.10, the strict syntax is now available in the Nextflow CLI.

The strict syntax is disabled by default. It can be enabled by setting the environment variable `NXF_SYNTAX_PARSER=v2`. See {ref}`strict-syntax` for details.

### Linting and formatting

The `nextflow lint` command can be used to check Nextflow scripts and config files for errors using the {ref}`strict syntax <strict-syntax>`. It can also format Nextflow files using the same formatter as the Nextflow language server. See {ref}`cli-lint` for details.

(workflow-outputs-third-preview)=

### Workflow outputs (third preview)

The third preview of workflow outputs makes the following breaking changes from the `previous version <workflow-outputs-second-preview>`:

- The `publish:` section can only be specified in the entry workflow.

- Workflow outputs in the `publish:` section are assigned instead of using the `>>` operator. The output name must be a valid identifier.

- By default, output files are published to the base output directory, rather than a subdirectory corresponding to the output name.

- The syntax for dynamic publish paths has changed. Instead of defining a closure that returns a closure with the `path` directive, the outer closure should use the `>>` operator to publish individual files.

- The `mapper` index directive has been removed. Use a `map` operator in the workflwo body instead.

See {ref}`workflow-output-def` to learn more about the workflow output definition.

## Enhancements

### Improved `inspect` command

Previously, the `nextflow inspect` command included all processes that were invoked in a preview run. Now, the `inspect` command includes all processes that are *included* by the entry workflow (directly or indirectly), which has several benefits:

- It includes all processes that could possibly be invoked by the workflow, not just the processes that are invoked for a particular run configuration.

- It takes less time because it doesn't need to evaluate the entry workflow -- only the includes.

- It can be run simply as `nextflow inspect <pipeline`, without providing any parameters or config profiles required for a real run.

See {ref}`cli-inspect` to learn more about the `inspect` command.

### Plugin version ranges

When specifying a plugin, the plugin version can new be prefixed with `~` to pin the major and minor version while allowing the latest patch release to be used. This syntax makes it possible to pin the plugin version while still allowing new patch releases to be used automatically.

See {ref}`plugins-page` for details.

### Improved publish error handling

Nextflow will terminate the run if the thread pool responsible for publishing files takes too long. Previously, this timeout was reported as a warning. Now, it is reported as an error.

The previous behavior can be restored with the following config setting:

```groovy
workflow.output.ignoreErrors = true
```

## Breaking changes

- Nextflow now requires Java 17 or newer. See {ref}`install-requirements` for instructions on how to install Java 17.

- The {ref}`hyperqueue-executor` executor now requires HyperQueue 0.20.0 or later.

## Deprecations

- The process `shell` section has been deprecated. See {ref}`process-shell` for details.

- Nextflow will report a warning if it encounters a process `shell` directive that contains newlines. This warning will become an error in a future version.

- The `-with-weblog` CLI option has been deprecated. See [nextflow-io/nf-weblog](https://github.com/nextflow-io/nf-weblog) to learn how to use the `nf-weblog` plugin.

## Miscellaneous

- New config option: `workflow.output.copyAttributes`
- New standard library function `env()`
- Support `disk` directive for Azure Batch
