/*
 * Nextflow configuration for dataset upload testing
 */

// Enable workflow output feature (required for output blocks)
nextflow.preview.output = true

// Enable Seqera Platform monitoring
tower {
    enabled = true
    accessToken = System.getenv('TOWER_ACCESS_TOKEN')
    endpoint = 'https://api.cloud.seqera.io'

    // Configure automatic dataset upload
    datasets {
        enabled = true
        createMode = 'auto'  // Automatically create datasets
        namePattern = '${workflow.runName}-outputs'

        // Optional: per-output configuration
        // perOutput {
        //     'analysis_results' {
        //         enabled = true
        //         // datasetId = 'existing-dataset-id'  // Use existing dataset
        //     }
        // }
    }
}

// Workflow metadata
manifest {
    name = 'dataset-upload-test'
    description = 'Test workflow for automatic dataset upload'
    version = '1.0.0'
}

// Process configuration
process {
    executor = 'local'
}
