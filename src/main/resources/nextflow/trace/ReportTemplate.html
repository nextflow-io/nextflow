<!DOCTYPE html>
<!--
  ~ Copyright (c) 2013-2017, Centre for Genomic Regulation (CRG).
  ~ Copyright (c) 2013-2017, Paolo Di Tommaso and the respective authors.
  ~
  ~   This file is part of 'Nextflow'.
  ~
  ~   Nextflow is free software: you can redistribute it and/or modify
  ~   it under the terms of the GNU General Public License as published by
  ~   the Free Software Foundation, either version 3 of the License, or
  ~   (at your option) any later version.
  ~
  ~   Nextflow is distributed in the hope that it will be useful,
  ~   but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~   GNU General Public License for more details.
  ~
  ~   You should have received a copy of the GNU General Public License
  ~   along with Nextflow.  If not, see <http://www.gnu.org/licenses/>.
  -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Nextflow: Workflow Report</title>

  <style type="text/css">
  ${ assets_css.join("\n\n\n\n") }

  /* Nextflow Report Custom CSS */
  body {
    padding-top: 80px;
  }
  pre {
    margin-bottom: 0;
  }
  </style>

</head>
<body>
  <nav id="nf-report-navbar" class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="#">Nextflow Report</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="#summary">Summary</a></li>
        <li class="nav-item"><a class="nav-link" href="#timeline">Timeline</a></li>
        <li class="nav-item"><a class="nav-link" href="#resources">Resources</a></li>
        <li class="nav-item"><a class="nav-link" href="#versions">Software Versions</a></li>
        <li class="nav-item"><a class="nav-link" href="#tasks">Tasks</a></li>
      </ul>
    </div>
  </nav>

  <div class="container-fluid" data-spy="scroll" data-target="#nf-report-navbar" data-offset="0">

    <h2 id="summary">Report Summary</h2>
    <p><em>Coming soon..</em></p>

    <h2 id="timeline">Timeline</h2>
    <p><em>Coming soon..</em></p>

    <h2 id="resources">Resource Usage</h2>

    <h4>CPU Usage</h4>
    <div id="cpuplot"></div>

    <h4>Memory Usage</h4>
    <div id="memplot"></div>

    <h4>Job Duration</h4>
    <div id="timeplot"></div>

    <h2 id="versions">Software Versions</h2>
    <p><em>Coming soon..</em></p>

    <h2 id="tasks">Tasks</h2>
    <table class="table small table-striped" id="tasks_table">
      <thead>
        <tr>
          <th>task_id</th>
          <th>process</th>
          <th>tag</th>
          <th>name</th>
          <th>status</th>
          <th>hash</th>
          <th>exit</th>
          <th>submit</th>
          <th>start</th>
          <th>module</th>
          <th>container</th>
          <th>attempt</th>
          <th>script</th>
          <th>scratch</th>
          <th>workdir</th>
          <th>complete</th>
          <th>duration</th>
          <th>realtime</th>
          <th>pct_cpu</th>
          <th>pct_mem</th>
          <th>vmem</th>
          <th>rss</th>
          <th>peak_vmem</th>
          <th>peak_rss</th>
          <th>rchar</th>
          <th>wchar</th>
          <th>syscr</th>
          <th>syscw</th>
          <th>read_bytes</th>
          <th>write_bytes</th>
          <th>native_id</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

  </div>


<script type="text/javascript">
${ assets_js.join("\n\n\n\n") }

// Nextflow report data
window.data = {
  "trace": [
    <% out << records.collect{ k,v -> """
    {
      "task_id": "${v.task_id}",
      "status": "${v.status}",
      "hash": "${v.hash}",
      "name": "${v.name}",
      "exit": "${v.exit}",
      "submit": "${v.submit}",
      "start": "${v.start}",
      "process": "${v.process}",
      "tag": "${v.tag}",
      "module": "${v.module}",
      "container": "${v.container}",
      "attempt": "${v.attempt}",
      "script": "${v.script}",
      "scratch": "${v.scratch}",
      "workdir": "${v.workdir}",
      "complete": "${v.complete}",
      "duration": "${v.duration}",
      "realtime": "${v.realtime}",
      "pct_cpu": "${v."%cpu"}",
      "pct_mem": "${v."%mem"}",
      "vmem": "${v.vmem}",
      "rss": "${v.rss}",
      "peak_vmem": "${v.peak_vmem}",
      "peak_rss": "${v.peak_rss}",
      "rchar": "${v.rchar}",
      "wchar": "${v.wchar}",
      "syscr": "${v.syscr}",
      "syscw": "${v.syscw}",
      "read_bytes": "${v.read_bytes}",
      "write_bytes": "${v.write_bytes}",
      "native_id": "${v.native_id}"
    },
    """ }.join() %>
  ]
};

</script>

</body>
</html>